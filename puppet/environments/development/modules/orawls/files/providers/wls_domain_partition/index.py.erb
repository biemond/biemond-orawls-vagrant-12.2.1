
wlst_name = '/Partitions/'

m = ls(wlst_name, returnMap='true')

f = open_file("name;virtual_target;root_file_system")
for token in m:
    print '___'+token+'___'
    cd(wlst_name + token)

    virtual_target = retrieve_virtual_target_list(wlst_name + token, 'AvailableTargets')

    cd(wlst_name + token + '/SystemFileSystem/' + token)
    root_file_system = get('Root')

    add_index_entry(f, [domain+'/'+token,','.join(virtual_target),root_file_system])

f.close()
report_back_success()
