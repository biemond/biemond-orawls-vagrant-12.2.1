# check the domain else we need to skip this (done in wls_access.rb)
real_domain='<%= domain %>'

wlst_action = '<%= wlst_action %>'

name                        = '<%= bridge_destination_name %>'
adapter                     = '<%= adapter %>'
classpath                   = '<%= classpath %>'
connectionfactoryjndi       = '<%=connectionfactoryjndi%>'
connectionurl               = '<%=connectionurl%>'
destinationjndi             = '<%=destinationjndi%>'
destinationtype             = '<%=destinationtype%>'
initialcontextfactory       = '<%=initialcontextfactory%>'
user_name                   = '<%=user_name%>'
password                    = '<%=password%>'

edit()
startEdit()

try:

    cd('/')

    if wlst_action == 'create':
        cmo.createJMSBridgeDestination(name)

    cd('/JMSBridgeDestinations/' + name)
    set_attribute_value('Name', name, use_default_value_when_empty)
    set_attribute_value('AdapterJNDIName', adapter, use_default_value_when_empty)
    set_attribute_value('Classpath', classpath, use_default_value_when_empty)
    set_attribute_value('ConnectionFactoryJNDIName', connectionfactoryjndi, use_default_value_when_empty)
    set_attribute_value('ConnectionURL', connectionurl, use_default_value_when_empty)
    set_attribute_value('DestinationJNDIName', destinationjndi, use_default_value_when_empty)
    set_attribute_value('DestinationType', destinationtype, use_default_value_when_empty)
    set_attribute_value('InitialContextFactory', initialcontextfactory, use_default_value_when_empty)
    set_attribute_value('UserName', user_name, use_default_value_when_empty)
    set_attribute_value('UserPassword', password, use_default_value_when_empty)

    save()
    activate()
    report_back_success()

except:
    report_back_error()
